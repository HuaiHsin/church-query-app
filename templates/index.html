<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>è–å·¥æ’ç¨‹æŸ¥è©¢</title>
    <style>
        body { font-family: sans-serif; padding: 20px; }
        input, select { padding: 5px; }
        ul { list-style: none; padding: 0; }
        li { margin-bottom: 10px; }
    </style>
</head>
<body>
    <h1>ğŸ“… æŸ¥è©¢è–å·¥/è©©ç­æ’ç¨‹</h1>
    <form action="/query" method="get">
        <label>å¹´ä»½ï¼š
            <input type="number" name="year" value="{{ year or '' }}" required>
        </label>
        <label>æœˆä»½ï¼š
            <input type="number" name="month" value="{{ month or '' }}" required>
        </label>
        <label>å§“åï¼š
            <input type="text" name="name" value="{{ name or '' }}" required>
        </label>
        <button type="submit">æŸ¥è©¢</button>
    </form>

    {% if error %}
        <p style="color: red;">{{ error }}</p>
    {% endif %}

    {% if unified_results %}
        <h2>æŸ¥è©¢çµæœ</h2>
        <ul>
            {% for r in unified_results %}
                <li>ğŸ“… {{ r.date }} {{ r.time }}<br>
                    â–ª {{ r.role }}: {{ r.name }}
                    {% if r.source %}
                        <span style="color: gray;">ï¼ˆ{{ r.source }}ï¼‰</span>
                    {% endif %}
                </li>
            {% endfor %}
        </ul>
        <p style="color: gray;">
            OCR {% if ocr_from_cache %}ï¼ˆä½¿ç”¨å¿«å–ï¼‰{% else %}ï¼ˆé‡æ–°è¾¨è­˜ï¼‰{% endif %}
        </p>
    {% endif %}

    {% if ocr_debug %}
        <details>
            <summary>ğŸ” é¡¯ç¤º OCR åŸå§‹æ–‡å­—ï¼ˆdebugï¼‰</summary>
            <pre style="white-space: pre-wrap; background: #f9f9f9; padding: 10px;">{{ ocr_debug }}</pre>
        </details>
    {% endif %}
</body>
</html>
